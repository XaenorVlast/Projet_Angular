<body>
    <!-- Product-->
    <div class="container mt-4" style="padding-top: 3%; padding-bottom: 3%;">
        <div class="row">
            <div class="col-md-12">                
                <div class="card product-card w-100 h-100">
                <h2 class="gras">Product</h2>
                    <div class="row g-0">
                        <div class="col-md-4">
                            <img class="card-img-top" [src]="product.image_url" alt="Image du produit">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title" style="color: red">{{ product.product_name }}</h5>
                                <p class="card-text"><strong>Barcode:</strong>{{product.id}}</p>
                                <p class="card-text"><strong>Marque :</strong> {{ product.brands }}</p>
                                <p class="card-text"><strong>Catégories :</strong> {{ product.categories }}</p>
                                <p class="card-text"><strong>Nom générique :</strong> {{ product.generic_name }}</p>
                                <p class="card-text"><strong>Quantité :</strong> {{ product.quantity }}</p>
                                <p class="card-text"><strong>Packaging :</strong> {{ product.packaging}}</p>
                                <p class="card-text"><strong>Labels, certifications, awards</strong> {{ product.labels}}</p>
                                <p class="card-text"><strong>Origine du produit:</strong> {{ product.origin}}</p>
                                <p class="card-text"><strong>Magasins :</strong> {{ product.stores}}</p>
                                <p class="card-text"><strong>Pays :</strong> {{ product.countries}}</p>
                                <a class="btn btn-primary" (click)="returnAcceuil()">Retour</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Health -->
    <div class="container mt-4" style="padding-top: 3%; padding-bottom: 3%;">
        <div class="row">
            <div class="col-12">
                <div class="card product-health w-100 h-100">
                    <h2 class="gras">Health</h2>
                    <br>
                    <div class="row g-0">
                        <div class="col-md-8">
                                <h3 style="color: green;">Ingredients</h3>
                                <div class="ingredients d-flex align-items-start">
                                <img class="card-img-top"[src]="product.image_ingredients_url" style="height: 200px;">
                                </div>
                                 <br>
                            <h4>Food Processing</h4>
                            <br>
                            <br>
                            <!-- Food Processing --->
                            <div class="nova-group d-flex align-items-start">
    <button (click)="toggleNovaGroup()" class="invisible-button">
        <div *ngIf="product.nova_groups_tags[0] === 'en:1-unprocessed-or-minimally-processed-foods'" class="d-flex align-items-center">
            <div>
                <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-1.svg">
            </div>
            <div class="ml-2">
                <h4 class="gras" style="color: green;">Unprocessed or minimally processed foods</h4>
            </div>
        </div>
        <div *ngIf="product.nova_groups_tags[0] === 'en:2-processed-culinary-ingredients'" class="d-flex align-items-center">
            <div>
                <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-2.svg">
            </div>
            <div class="ml-2">
                <h4 class="gras" style="color: yellow;">Processed culinary ingredients</h4>
            </div>
        </div>
        <div *ngIf="product.nova_groups_tags[0] === 'en:3-processed-foods'" class="d-flex align-items-center">
            <div>
                <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-3.svg">
            </div>
            <div class="ml-2">
                <h4 class="gras" style="color: orange;">Processed foods</h4>
            </div>
        </div>
        <div *ngIf="product.nova_groups_tags[0] === 'en:4-ultra-processed-food-and-drink-products'" class="d-flex align-items-center">
            <div>
                <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-4.svg">
            </div>
            <div class="ml-2">
                <h4 class="gras" style="color: red;">Ultra processed foods</h4>
            </div>
        </div>
    </button>
</div>
<br>
<div *ngIf="isNovaGroupVisible">
    <a href="https://world.openfoodfacts.org/nova" class="btn btn-success"> Learn more about the Nova Classification</a>
</div>
<br>

                            <!-- Nutrition-->
                            <h3> Nutrition</h3>
                            <div class="nutriscore-level d-flex align-items-start">
                            <button (click)= "toggleNutriscore()" class="invisible-button">
                            <div *ngIf="product.nutriscore_tags[0] === 'a'" class="d-flex align-items-center">
                              <div class="col-auto">
                                <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-a.svg">
                                </div>
                                <div class="col">
                                <h4 class="gras" style="color: green;">Unprocessed or minimally processed foods</h4>
                                </div>
                            </div>
                            <div *ngIf="product.nutriscore_tags[0] === 'b'" class="d-flex align-items-center">
                              <div class="col-auto">
                                <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-b.svg">
                                </div>
                                <div class="col">
                                <h4 class="gras" style="color: lightgreen;">Processed culinary ingredients</h4>
                                </div>
                            </div>
                            <div *ngIf="product.nutriscore_tags[0] === 'c'" class="d-flex align-items-center">
                              <div class="col-auto">
                                <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-c.svg">
                                </div>
                                <div class="col">
                                <h4 class="gras" style="color: yellow;">Processed foods</h4>
                                </div>
                            </div>
                            <div *ngIf="product.nutriscore_tags[0] === 'd'" class="d-flex align-items-center">
                              <div class="col-auto">
                                <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-d.svg">
                                </div>
                                <div class="col">
                                <h4 class="gras" style="color: orange;">Ultra processed foods</h4>
                                </div>
                            </div>
                            <div *ngIf="product.nutriscore_tags[0] === 'e'" class="d-flex align-items-center">
                              <div class="col-auto">
                                <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-e.svg">
                                </div>
                                <div class="col">
                                <h4 class="gras" style="color: red;">Ultra processed foods</h4>
                                </div>
                            </div>
                        </button>
                        </div>
                        <div *ngIf="isNutriscoreVisible">
                            <a href="https://world.openfoodfacts.org/nutriscore" class="btn btn-success"> Learn more about the Nutriscore Classification</a>
                        </div>
                            <br>
                            <br>
                            <h5 class="gras">Positive points: {{product.nutriscore_data.positive_points}}</h5>
                            <br>
                            <h5>Protéines : {{product.nutriscore_data.proteins_points}} / 5</h5>
                            <br>
                            <h5>Fibres : {{product.nutriscore_data.fiber_points}} / 5</h5>
                            <br>
                            <h5>Fruits,végétables,nuts et colza/walnut/huile d'olives : {{product.nutriscore_data.fruits_vegetables_nuts_colza_walnut_olive_oils_points}} / 5 </h5>
                            <br>
                            <h5 class="gras">Negative points : {{product.nutriscore_data.negative_points}}</h5>
                            <br>
                            <h5>Energie : {{product.nutriscore_data.energy_points}} / 10 </h5>
                            <br>
                            <h5>Sucres : {{product.nutriscore_data.sugars_points}} / 10 </h5>
                            <br>
                            <h5>Acide gras saturés : {{product.nutriscore_data.saturated_fat_points}} / 10 </h5>
                            <br>
                            <h5>Sodium : {{product.nutriscore_data.sodium_points}} / 10 </h5>
                            <br>
                            <h5>Nutritional score : {{product.nutriscore_data.score}}</h5>

                            <br>
                            <div>
                               <div class="nutrient-level fat">
                                  <div class="nutrient-level d-flex align-items-start">
                                      <div *ngIf="product.nutrient_levels.fat === 'low'" class="mr-2">
                                          <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                      </div>
                                      <div *ngIf="product.nutrient_levels.fat === 'moderate'" class="mr-2">
                                          <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                      </div>
                                      <div *ngIf="product.nutrient_levels.fat === 'high'" class="mr-2">
                                          <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                      </div>
                                      <div class="d-flex align-items-center"> <!-- Ajout des classes pour l'alignement -->
                                        <p class="mb-0">Fat in {{product.nutrient_levels.fat}} quantity</p>
                                    </div>
                                  </div>
                                </div>
                             </div>
                          <br>
                            <!-- Saturated fat-->
                            <div class="nutrient-level saturated-fat">
                            <div class="nutrient-level d-flex align-items-start">
                                <div *ngIf="product.nutrient_levels_tags[1] === 'en:saturated-fat-in-low-quantity'">
                                  <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                </div>
                                <div *ngIf="product.nutrient_levels_tags[1]  === 'en:saturated-fat-in-moderate-quantity'">
                                  <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                </div>
                                <div *ngIf="product.nutrient_levels_tags[1] === 'en:saturated-fat-in-high-quantity'">
                                  <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                </div>
                                <p>Saturated fat in {{product.nutrient_levels.saturated_fat}} quantity</p>
                              </div>
                            </div>
                            <br>
                            <!-- Sugar --->
                            <div class="nutrient-level sugar">
                              <div class="nutrient-level d-flex align-items-start">
                                <div *ngIf="product.nutrient_levels.sugars  === 'low'">
                                  <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                </div>
                                <div *ngIf="product.nutrient_levels.sugars === 'moderate'">
                                  <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                </div>
                                <div *ngIf="product.nutrient_levels.sugars === 'high'">
                                  <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                </div>
                                <p>Sugars in {{product.nutrient_levels.sugars}} quantity</p>
                              </div>
                            </div>
                            <br>
                            <!-- Salt --->
                            <div class="nutrient-level salt">
                              <div class="nutrient-level d-flex align-items-start">
                                <div *ngIf="product.nutrient_levels.salt  === 'low'">
                                  <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                </div>
                                <div *ngIf="product.nutrient_levels.salt === 'moderate'">
                                  <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                </div>
                                <div *ngIf="product.nutrient_levels.salt === 'high'">
                                  <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                </div>
                                <p>Salt in {{product.nutrient_levels.salt}} quantity</p>
                              </div>
                            </div>
                            <br>
                            </div>

                    <!-- Table Nutrition facts-->        
                    <div class="d-flex align-items-center">
                      <img src="https://static.openfoodfacts.org/images/icons/dist/scale-balance.svg" style="height: 50px;" class="mr-3">
                      <h3>Nutrition facts</h3>
                    </div>
                    <table class="nutrition-facts">
                    <tr>
                        <th class="highlight nutrient-column">Éléments nutritifs</th>
                        <th class="highlight nutrient-column">Par 100g/100ml</th>
                        <th class="highlight nutrient-column">Par portion </th>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Énergie</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.energy_100g }} kJ ({{ product.nutriments.energy_100g }} kcal)</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.energy_serving }} kJ ({{ product.nutriments.energy_serving }} kcal)</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Matières grasses</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fat_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fat_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Acides gras saturés</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.saturated_fat_100g}} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.saturated_fat_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Glucides</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.carbohydrates_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.carbohydrates_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Sucres</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.sugars_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.sugars_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Fibres alimentaires</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fiber_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fiber_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Protéines</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.proteins_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.proteins_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Sel</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.salt_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.salt_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Silice</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.silica_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.silica_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Bicarbonate</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.bicarbonate_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.bicarbonate_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Potassium</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.potassium_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.potassium_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Chloride</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.chloride_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.chloride_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Calcium</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.calcium_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.calcium_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Magnesium</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.magnesium_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.magnesium_serving }} g</td>
                    </tr>
                    <tr>
                    <td class="highlight nutrient-column">Fruits vegetables nuts and rapeseed walnut and olive oils (estimation)</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fruits_vegetables_nuts_estimate_from_ingredients_100g}} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fruits_vegetables_nuts_estimate_from_ingredients_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Sulphate</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.sulphate_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.sulphate_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Nitrate</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.nitrate_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.nitrate_serving }} g</td>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Fluor</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fluor_100g }} g</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.fluor_serving }} g</td>
                    </tr>
                    <h5 class="gras" style="align-items: left;">Serving size: <p>{{product.serving_size}}</p> </h5>

                </table>
                        </div>
                    </div>
                </div>
                
                            </div>
                            </div>
                            <br>
                            
    <!-- Environment -->
    <div class="container mt-4" style="padding-top: 3%; padding-bottom: 3%">
        <div class="row">
            <div class="card product-environment w-100 h-100">
                <h2 class="gras"> Environment </h2>
                <br>
                <div *ngIf="product.ecoscore_tags[0] === 'a'">
                    <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-a.svg">
                    <h4 class="gras" style="color: green;">Unprocessed or minimally processed foods</h4>
                </div>
                <div *ngIf="product.ecoscore_tags[0] === 'b'">
                    <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-b.svg">
                    <h4 class="gras" style="color: lightgreen;">Processed culinary ingredients</h4>
                </div>
                <div *ngIf="product.ecoscore_tags[0] === 'c'">
                    <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-c.svg">
                    <h4 class="gras" style="color: yellow;">Processed foods</h4>
                </div>
                <div *ngIf="product.ecoscore_tags[0] === 'd'">
                    <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-d.svg">
                    <h4 class="gras" style="color: orange;">Ultra processed foods</h4>
                </div>
                <div *ngIf="product.ecoscore_tags[0] === 'not-applicable'">
                    <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-not-applicable.svg">
                    <h4 class="gras" style="color: black;">Not yet applicable for the category</h4>
                </div>
                <br>
                <h4 class="souligner"> Packaging </h4>
                <br>
                <h5 style="color: orange"> Packaging parts</h5>
                <br>
                <h5 style="color: orange"> Packaging materials</h5>
                <br>
                <table class="nutrition-facts">
                    <tr>
                        <th class="highlight nutrient-column">Material</th>
                        <th class="highlight nutrient-column">%</th>
                        <th class="highlight nutrient-column">Packaging weight</th>
                        <th class="highlight nutrient-column">Packaging weight per 100g of product</th>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">Énergie</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.energy_100g }} kJ ({{ product.nutriments.energy_100g }} kcal)</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.energy_serving }} kJ ({{ product.nutriments.energy_serving }} kcal)</td>
                    </tr> 
                </table>
                <br>
                <h4 class="souligner"> Transportation</h4>
                <br>
                <table class="nutrition-facts">
                    <tr>
                        <th class="highlight nutrient-column">Origin of the product and/or its ingredients</th>
                        <th class="highlight nutrient-column">% of ingredients</th>
                        <th class="highlight nutrient-column">Impact</th>
                    </tr>
                    <tr>
                        <td class="highlight nutrient-column">{{product.origins_old}}</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.energy_100g }} kJ ({{ product.nutriments.energy_100g }} kcal)</td>
                        <td class="highlight nutrient-column">{{ product.nutriments.energy_serving }} kJ ({{ product.nutriments.energy_serving }} kcal)</td>
                    </tr> 
                </table>
             </div>
        </div>
    </div>