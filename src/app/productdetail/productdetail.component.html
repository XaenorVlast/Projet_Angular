<!-- Auteurs du code : Maxence MAYOLY, Loick GOMEZ, Clément CHARABOT, date : 7 janvier 2024 --->

    <body>
      <!-- Product-->
      <div class="container mt-4" style="padding-top: 3%; padding-bottom: 3%;">
        <div class="row">
            <div class="col-md-12">                
                <div class="card product-card w-100 h-100">
                   <h1 class="gras">Product</h1>
                     <div class="row g-0">
                      <div class="col-md-4">
                      <img class="card-img-top" [src]="product.image_url" alt="Image du produit">
                      </div>
                      <div class="col-md-8">
                        <div class="card-body">
                          <h5 class="card-title" style="color: red">{{ product.product_name }}</h5><br><!--On affiche le produit-->
                          <h6 class="card-text"><strong>Marque :</strong> {{ product.brands }}</h6><br><!--Affichage marque-->
                          <h6 class="card-text"><strong>Catégories :</strong> {{ product.categories }}</h6><br><!--Affichage catégorie produit-->
                          <h6 class="card-text"><strong>Nom générique :</strong> {{ product.generic_name }}</h6><br><!--Affichage nom générique-->    
                          <h6 class="card-text"><strong>Quantité :</strong> {{ product.quantity }}</h6><br><!--Affichage quantité produit-->
                          <h6 class="card-text"><strong>Packaging :</strong> {{ product.packaging}}</h6><br><!--Affichage packaging-->
                          <h6 class="card-text"><strong>Labels, certifications, awards</strong> {{ product.labels}}</h6><br><!--Affichage labels-->     
                          <h6 class="card-text"><strong>Magasins :</strong> {{ product.stores}}</h6><br><!--Affichage magasins-->
                          <h6 class="card-text"><strong>Pays :</strong> {{product.countries}}</h6><br><!--Affichage pays-->
                          <a class="btn btn-primary" (click)="returnAcceuil()">Retour</a><!--Bouton retourner à l'accueil-->
                        </div>
                       </div>
                      </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Health -->
        <div class="container mt-4" style="padding-top: 3%; padding-bottom: 3%;">
          <div class="row">
            <div class="col-12">
               <div class="card product-health w-100 h-100">
               <h2 class="gras">Health</h2><br><!--Container Health-->
                 <div class="row g-0">
                    <h3 style="color: green;">Ingredients</h3>
                    <div class="col-md-2">
                       <img class="card-img-top"[src]="product.image_ingredients_url" style="height: 200px;"><br>
                       <h3> Food processing </h3>
                       <br>
                         <!-- Ingredients analysis --->
                        <h5>Ingredients analysis</h5>
                         <!-- Palm oil --->
                         <!--Si le tag ingrédient analysis est égale à palm oil free : on affiche un texte qui indique qu'il y a pas d'huile de palme-->
                        <div *ngIf="product.ingredients_analysis_tags[0] === 'en:palm-oil-free'" class="d-flex align-items-center">
                             <div class="col-auto">
                                 <h4 class="gras" style="color: green;">Palm oil free</h4>
                              </div>
                        </div>
                        <!--Si le tag ingrédient analysis est égale à may-contain-palm-oil: on affiche un texte qui indique qu'il peut contenir de l'huile de palme-->
                        <div *ngIf="product.ingredients_analysis_tags[0] === 'en:may-contain-palm-oil'" class="d-flex align-items-center">
                             <div class="col-auto">
                                 <h4 class="gras" style="color: orange;">May contain palm oil</h4>
                             </div>
                        </div>
                        <!--Si le tag ingrédient analysis est égale à palm oil free : on affiche un texte qui indique qu'il y a pas d'huile de palme-->
                        <div *ngIf="product.ingredients_analysis_tags[0] === 'en:palm-oil'" class="d-flex align-items-center">
                            <div class="col-auto">
                                <h4 class="gras" style="color: red;">Palm oil</h4>
                            </div>
                        </div>
                        <!--Si le tag ingrédient analysis est égale à palm oil free : on affiche un texte qui indique qu'il y a pas d'huile de palme-->
                        <div *ngIf="product.ingredients_analysis_tags[0] === 'en:palm-oil-status-unknown'" class="d-flex align-items-center">
                            <div class="col">
                                <h4 class="gras" style="color: grey;">Palm oil unknown</h4>
                            </div>
                        </div>
                        <!-- Vegan --->
                        <div *ngIf="product.ingredients_analysis_tags[1] === 'en:vegan'" class="d-flex align-items-center">
                            <div class="col">
                            <h4  class="gras" style="color: green;">Vegan</h4>
                            </div>
                        </div>
                        <div *ngIf="product.ingredients_analysis_tags[1] === 'en:maybe-vegan'" class="d-flex align-items-center">
                            <div class="col">
                            <h4 class="gras" style="color: orange;">May contain vegan</h4>
                            </div>
                        </div>
                        <div *ngIf="product.ingredients_analysis_tags[1] === 'en:non-vegan'" class="d-flex align-items-center">
                            <div class="col">
                            <h4 class="gras" style="color: red;">No vegan </h4>
                            </div>
                        </div>
                        <div *ngIf="product.ingredients_analysis_tags[1] === 'en:vegan-status-unknown'" class="d-flex align-items-center">
                            <div class="col">
                            <h4 class="gras" style="color: grey;">Vegan unknown</h4>
                        </div>
                    </div>
                </div>
                        <!-- Vegetarian --->
                        <div class="ingredients-analysis-level d-flex align-items-start">
                            <div *ngIf="product.ingredients_analysis_tags[2] === 'en:vegetarian'" class="d-flex align-items-center">
                              <div class="col">
                              <h4  class="gras" style="color: green;">Vegetarian</h4>
                            </div>
                        </div>
                            <div *ngIf="product.ingredients_analysis_tags[2] === 'en:maybe-vegetarian'" class="d-flex align-items-center">
                                <div class="col">
                                <h4  class="gras"style="color: orange;">May contain vegetarian</h4>
                            </div>
                        </div>
                            <div *ngIf="product.ingredients_analysis_tags[2] === 'en:non-vegetarian'" class="d-flex align-items-center">
                                <div class="col">
                                <h4 class="gras" style="color: red;">No vegetarian </h4>
                                </div>
                            </div>
                            <div *ngIf="product.ingredients_analysis_tags[2] === 'en:vegetarian-status-unknown'" class="d-flex align-items-center">
                                <div class="col">
                                <h4 class="gras" style="color: grey;">Vegatarian unknown</h4>
                            </div>
                        </div>
                    </div>
                    
                        <!-- Food Processing --->
                        <div class="nova-group d-flex align-items-start">
                            <button (click)="toggleNovaGroup()" class="invisible-button"> 
                                <div *ngIf="product.nova_groups_tags[0] === 'en:1-unprocessed-or-minimally-processed-foods'" class="d-flex align-items-center">
                                    <div>
                                    <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-1.svg">
                                    </div>
                                    <div class="ml-2">
                                    <h4 class="gras" style="color: green;">Unprocessed or minimally processed foods</h4>
                                    </div>
                                </div>
                                <div *ngIf="product.nova_groups_tags[0] === 'en:2-processed-culinary-ingredients'" class="d-flex align-items-center">
                                    <div>
                                    <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-2.svg">
                                    </div>
                                    <div class="ml-2">
                                    <h4 class="gras" style="color: yellow;">Processed culinary ingredients</h4>
                                    </div>
                                </div>
                                    <div *ngIf="product.nova_groups_tags[0] === 'en:3-processed-foods'" class="d-flex align-items-center">
                                    <div>
                                    <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-3.svg">
                                    </div>
                                    <div class="ml-2">
                                    <h4 class="gras" style="color: orange;">Processed foods</h4>
                                    </div>
                                </div>
                                    <div *ngIf="product.nova_groups_tags[0] === 'en:4-ultra-processed-food-and-drink-products'" class="d-flex align-items-center">
                                    <div>
                                    <img src="https://static.openfoodfacts.org/images/attributes/dist/nova-group-4.svg">
                                    </div>
                                    <div class="ml-2">
                                    <h4 class="gras" style="color: red;">Ultra processed foods</h4>
                                    </div>
                                </div>
                            </button>
                        </div><br><br>
                                <div *ngIf="isNovaGroupVisible">
                                    <a href="https://world.openfoodfacts.org/nova" class="btn btn-success"> Learn more about the Nova Classification</a>
                                </div><br><br>

                                <!-- Card Nutrition-->
                                <h3> Nutrition</h3><br>
                                   <div class="nutriscore-level d-flex align-items-start">
                                      <button (click)= "toggleNutriscore()" class="invisible-button">
                                        <!--Nutri Score A --->
                                       <div *ngIf="product.nutriscore_tags[0] === 'a'" class="d-flex align-items-center">
                                        <div class="col-auto">
                                        <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-a.svg">
                                        </div>
                                        <div class="col">
                                          <h4 class="gras" style="color: green;">Very good nutritional quality</h4>
                                        </div>
                                       </div>
                                       <!--Nutri Score B --->
                                      <div *ngIf="product.nutriscore_tags[0] === 'b'" class="d-flex align-items-center">
                                        <div class="col-auto">
                                        <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-b.svg">
                                      </div>
                                      <div class="col">
                                       <h4 class="gras" style="color: lightgreen;">Good nutritional quality</h4>
                                      </div>
                                     </div>
                                     <!--Nutri Score C --->
                                     <div *ngIf="product.nutriscore_tags[0] === 'c'" class="d-flex align-items-center">
                                       <div class="col-auto">
                                       <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-c.svg">
                                     </div>
                                     <div class="col">
                                       <h4 class="gras" style="color: yellow;">Moderate nutritional quality</h4>
                                     </div>
                                    </div>
                                    <!--Nutri Score D --->
                                    <div *ngIf="product.nutriscore_tags[0] === 'd'" class="d-flex align-items-center">
                                      <div class="col-auto">
                                      <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-d.svg">
                                    </div>
                                     <div class="col">
                                      <h4 class="gras" style="color: orange;">Bad nutritional quality</h4>
                                     </div>
                                    </div>
                                    <!--Nutri Score E --->
                                    <div *ngIf="product.nutriscore_tags[0] === 'e'" class="d-flex align-items-center">
                                      <div class="col-auto">
                                      <img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-e.svg">
                                    </div>
                                     <div class="col">
                                       <h4 class="gras" style="color: red;">Very bad nutritional quality</h4>
                                      </div>
                                    </div>
                                   </button>
                                </div>
                                <!-- Si le nutriscore est visible --->
                                <div *ngIf="isNutriscoreVisible"><br><br>
                                    <h5 class="gras">Positive points: {{product.nutriscore_data.positive_points}}</h5><br>
                                    <h5>Protéines : {{product.nutriscore_data.proteins_points}} / 5</h5><br>
                                    <h5>Fibres : {{product.nutriscore_data.fiber_points}} / 5</h5> <br>
                                    <h5>Fruits,végétables,nuts et colza/walnut/huile d'olives : {{product.nutriscore_data.fruits_vegetables_nuts_colza_walnut_olive_oils_points}} / 5 </h5><br>
                                    <h5 class="gras">Negative points : {{product.nutriscore_data.negative_points}}</h5><br>
                                    <h5>Energie : {{product.nutriscore_data.energy_points}} / 10 </h5><br>
                                    <h5>Sucres : {{product.nutriscore_data.sugars_points}} / 10 </h5><br>
                                    <h5>Acide gras saturés : {{product.nutriscore_data.saturated_fat_points}} / 10 </h5><br>
                                    <h5>Sodium : {{product.nutriscore_data.sodium_points}} / 10 </h5><br>
                                    <h5>Nutritional score : {{product.nutriscore_data.score}}</h5>
                                    <a href="https://world.openfoodfacts.org/nutriscore" class="btn btn-success"> Learn more about the Nutriscore Classification</a>
                                </div><br><br>

                                   <!-- Quantités-->
                                    <!-- Fat --->
                                    <div>
                                      <div class="nutrient-level fat">
                                        <div class="nutrient-level d-flex align-items-start">
                                          <div *ngIf="product.nutrient_levels.fat === 'low'">
                                          <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                          </div>
                                          <div *ngIf="product.nutrient_levels.fat === 'moderate'">
                                          <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                          </div>
                                          <div *ngIf="product.nutrient_levels.fat === 'high'">
                                          <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                        </div>
                                      <div class="d-flex align-items-start"> <!-- Ajout des classes pour l'alignement -->
                                      <p>Fat in {{product.nutrient_levels.fat}} quantity</p>
                                     </div>
                                    </div>
                                   </div>
                                </div><br>
                                   <!-- Saturated fat-->
                                    <div class="nutrient-level saturated-fat">
                                      <div class="nutrient-level d-flex align-items-start">
                                       <div *ngIf="product.nutrient_levels_tags[1] === 'en:saturated-fat-in-low-quantity'">
                                       <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                       </div>
                                       <div *ngIf="product.nutrient_levels_tags[1]  === 'en:saturated-fat-in-moderate-quantity'">
                                       <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                       </div>
                                       <div *ngIf="product.nutrient_levels_tags[1] === 'en:saturated-fat-in-high-quantity'">
                                       <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                    </div>
                                    <p>Saturated fat in {{product.nutrient_levels.saturated_fat}} quantity</p>
                                   </div>
                                </div><br>
                                   <!-- Sugar --->
                                    <div class="nutrient-level sugar">
                                      <div class="nutrient-level d-flex align-items-start">
                                        <div *ngIf="product.nutrient_levels.sugars  === 'low'">
                                        <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                        </div>
                                        <div *ngIf="product.nutrient_levels.sugars === 'moderate'">
                                        <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                        </div>
                                        <div *ngIf="product.nutrient_levels.sugars === 'high'">
                                        <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                    </div>
                                    <p>Sugars in {{product.nutrient_levels.sugars}} quantity</p>
                                  </div>
                                </div><br>
                                   <!-- Salt --->
                                    <div class="nutrient-level salt">
                                      <div class="nutrient-level d-flex align-items-start">
                                       <div *ngIf="product.nutrient_levels.salt  === 'low'">
                                       <img src="https://static.openfoodfacts.org/images/misc/low.svg">
                                      </div>
                                       <div *ngIf="product.nutrient_levels.salt === 'moderate'">
                                       <img src="https://static.openfoodfacts.org/images/misc/moderate.svg">
                                      </div>
                                       <div *ngIf="product.nutrient_levels.salt === 'high'">
                                       <img src="https://static.openfoodfacts.org/images/misc/high.svg">
                                    </div>
                                    <p>Salt in {{product.nutrient_levels.salt}} quantity</p>
                                </div>
                            </div><br>
                        </div>

                            <!-- Tableau Nutrition facts-->        
                                <div class="d-flex align-items-center">
                                   <img src="https://static.openfoodfacts.org/images/icons/dist/scale-balance.svg" style="height: 50px;" class="mr-3">
                                   <h3>Nutrition facts</h3>
                                </div>
                                  <table class="nutrition-facts">
                                   <tr><!--Colonnes-->
                                    <th class="highlight nutrient-column">Éléments nutritifs</th>
                                    <th class="highlight nutrient-column">Par 100g/100ml</th>
                                    <th class="highlight nutrient-column">Par portion </th>
                                   </tr>
                                   <tr>
                                    <td class="highlight nutrient-column">Énergie</td>
                                    <td class="highlight nutrient-column">{{ product.nutriments.energy_100g }} kJ ({{ product.nutriments.energy_100g }} kcal)</td>
                                    <td class="highlight nutrient-column">{{ product.nutriments.energy_serving }} kJ ({{ product.nutriments.energy_serving }} kcal)</td>
                                   </tr>
                                   <tr>
                                    <td class="highlight nutrient-column">Matières grasses</td>
                                    <td class="highlight nutrient-column">{{ product.nutriments.fat_100g }} g</td>
                                    <td class="highlight nutrient-column">{{ product.nutriments.fat_serving }} g</td>
                                   </tr>
                                   <tr>
                                    <td class="highlight nutrient-column">Glucides</td>
                                    <td class="highlight nutrient-column">{{ product.nutriments.carbohydrates_100g }} g</td>
                                    <td class="highlight nutrient-column">{{ product.nutriments.carbohydrates_serving }} g</td>
                                   </tr>
                                    <tr>
                                     <td class="highlight nutrient-column">Sucres</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.sugars_100g }} g</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.sugars_serving }} g</td>
                                    </tr>
                                    <tr>
                                     <td class="highlight nutrient-column">Fibres alimentaires</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.fiber_100g }} g</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.fiber_serving }} g</td>
                                    </tr>
                                    <tr>
                                     <td class="highlight nutrient-column">Protéines</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.proteins_100g }} g</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.proteins_serving }} g</td>
                                    </tr>
                                    <tr>
                                     <td class="highlight nutrient-column">Sel</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.salt_100g }} g</td>
                                     <td class="highlight nutrient-column">{{ product.nutriments.salt_serving }} g</td>
                                    </tr>
                                    <h5 class="gras" style="align-items: left;">Serving size: <p>{{product.serving_size}}</p> </h5>
                                </table>
                            </div>
                        </div>
                    </div>
                </div><br>
 <!-- Container Card Environment -->
<div class="container mt-4" style="padding-top: 3%; padding-bottom: 3%">
  <div class="row">
    <div class="card product-environment w-100 h-100">
      <h2 class="gras">Environment</h2><br>
      <div *ngIf="product.ecoscore_tags[0] === 'a'" style="text-align: center;">
        <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-a.svg" style="margin: auto;">
        <h4 class="gras" style="color: green;">Eco-Score A - Very low environmental impact</h4>
      </div>
      <div *ngIf="product.ecoscore_tags[0] === 'b'" style="text-align: center;">
        <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-b.svg" style="margin: auto;">
        <h4 class="gras" style="color: lightgreen;">Eco-Score B - Low environmental impact</h4>
      </div>
      <div *ngIf="product.ecoscore_tags[0] === 'c'" style="text-align: center;">
        <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-c.svg" style="margin: auto;">
        <h4 class="gras" style="color: yellow;">Eco-Score C - Moderate environmental impact</h4>
      </div>
      <div *ngIf="product.ecoscore_tags[0] === 'd'" style="text-align: center;">
        <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-d.svg" style="margin: auto;">
        <h4 class="gras" style="color: orange;">Eco-Score D - High environmental impact</h4>
      </div>
      <div *ngIf="product.ecoscore_tags[0] === 'e'" style="text-align: center;">
        <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-e.svg" style="margin: auto;">
        <h4 class="gras" style="color: red;">Eco-Score E - Very high environmental impact</h4>
      </div>
      <div *ngIf="product.ecoscore_tags[0] === 'not-applicable'" style="text-align: center;">
        <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-not-applicable.svg" style="margin: auto;">
        <h4 class="gras" style="color: grey;">Eco-Score not yet applicable for the category :</h4>
      </div>
      <div *ngIf="product.ecoscore_tags[0] === 'unknown'" style="text-align: center;">
        <img src="https://static.openfoodfacts.org/images/attributes/dist/ecoscore-unknown.svg" style="margin: auto;">
        <h4 class="gras" style="color: black;">Eco-Score not computed Unknown environmental impact</h4>
      </div><br>
    </div>
  </div>
</div>
